import{r as t,j as c,J as Q,t as h,C as F,A as z,G as ie,a as ue,P as de}from"./index-CzYQnn4a.js";import{s as $,c as B,d as le}from"./index-CXkp9FBw.js";import{r as f,e as y,C as Y,k as me}from"./index-Bu6GPOTx.js";import{v as fe,S as xe}from"./index-CEm9z_cJ.js";var d=(e=>(e[e.landing=0]="landing",e[e.intro=1]="intro",e[e.game=2]="game",e))(d||{}),S=(e=>(e[e.unset=0]="unset",e[e.loaded=1]="loaded",e[e.ready=2]="ready",e))(S||{});const H={step:0,page:0,videoLoaded:!1},l=t.createContext([H,()=>{}]);var C=(e=>(e[e.unset=0]="unset",e[e.fadeOut=1]="fadeOut",e[e.door=2]="door",e[e.entry=3]="entry",e))(C||{});const _={step:0},R=t.createContext([_,()=>{}]),ye=""+new URL("zhongli-intro-Bt1MHqHS.mp4",import.meta.url).href,ve=t.memo(()=>{const[{page:e}]=t.useContext(l),[{step:s},r]=t.useContext(R),[n,o]=f({opacity:1});return t.useEffect(()=>{e===d.intro&&(s===C.unset?o({opacity:0},{duration:1e3,easing:y.outQuart}):s===C.fadeOut?o({opacity:1},{duration:1200,easing:y.inQuart,onEnd:()=>r(a=>({...a,step:C.door}))}):s===C.door&&o({opacity:0},{duration:800,easing:y.inOutQuart}))},[e,s]),c.jsx("div",{className:"darkScreen",style:n})}),pe=t.memo(()=>{const[{page:e},s]=t.useContext(l),[,r]=t.useContext(R),n=t.useRef(null);return t.useEffect(()=>{e===d.intro&&n.current?.play()},[e]),t.useEffect(()=>{const o=()=>{s(m=>({...m,videoLoaded:!0})),n.current&&(n.current.pause(),n.current.currentTime=1),n.current?.removeEventListener("loadeddata",o),n.current?.removeEventListener("playing",o)};n.current?.readyState===0?n.current?.addEventListener("loadeddata",o):n.current?.addEventListener("playing",o);const a=()=>{n.current&&(n.current.pause(),n.current.currentTime=n.current.duration,r(m=>({...m,step:C.entry})),n.current?.removeEventListener("ended",a))};n.current?.addEventListener("ended",a);const i=()=>{n.current&&n.current?.currentTime/n.current?.duration>.6&&(r(A=>({...A,step:C.fadeOut})),n.current?.removeEventListener("timeupdate",i))};n.current?.addEventListener("timeupdate",i)},[]),c.jsx($,{ref:n,src:ye,width:"100%",height:"100%",autoPlay:!0,preload:"auto",playbackRate:1,playsInline:!0,muted:!0,loop:!1})}),ge=t.memo(()=>{const[{step:e}]=t.useContext(R),[{page:s},r]=t.useContext(l),[n,o]=f({opacity:1,scale:1});return t.useEffect(()=>{s===d.intro&&e===C.entry&&o({opacity:0,scale:1.2},{duration:800,onEnd:()=>{r(a=>({...a,page:d.game}))}})},[e,s]),c.jsxs("div",{className:"Background",style:n,children:[e<=C.fadeOut&&c.jsx(pe,{}),c.jsx(ve,{})]})}),he=t.memo(()=>{const e=t.useId(),[{page:s}]=t.useContext(l),[{step:r},n]=t.useContext(R),[o,a]=f({opacity:0,scale:1.5}),[i,m]=t.useState(!1);return t.useEffect(()=>{s===d.intro&&(r===C.door?a({opacity:1,scale:1},{delay:1200,duration:500,easing:y.outBack,onEnd:()=>{m(!0),Q.add(`#${e}`,()=>{Q.remove(`#${e}`),n(A=>({...A,step:C.entry}))})}}):r===C.entry&&a({opacity:0},1))},[s,r]),c.jsx("div",{className:"Button",children:c.jsx("div",{id:e,style:o,className:h(i&&"pointer-events-auto cursor-pointer"),children:c.jsx("div",{})})})}),je=t.memo(()=>{const[{page:e}]=t.useContext(l),[{step:s}]=t.useContext(R),[r,n]=f({opacity:0,y:-300,scale:1});return t.useEffect(()=>{e===d.intro&&(s===C.door?n({opacity:1,y:0},{duration:1e3,delay:500,easing:y.outQuart}):s===C.entry&&n({opacity:0},{duration:1,easing:y.inOutQuart}))},[e,s]),c.jsx("div",{className:"Dialog",children:c.jsx("div",{style:r,children:c.jsx("div",{})})})}),Ce=t.memo(()=>{const[{page:e}]=t.useContext(l),s=t.useState(_);return c.jsx(R.Provider,{value:s,children:c.jsx("div",{className:h("Intro",e===d.intro?"visible":"invisible"),children:c.jsxs(Y,{children:[c.jsx(ge,{}),c.jsx(je,{}),c.jsx(he,{})]})})})});var p=(e=>(e[e.unset=0]="unset",e[e.entry=1]="entry",e[e.fadeOut=2]="fadeOut",e))(p||{});const ee={step:0},M=t.createContext([ee,()=>{}]),Ae=5e3,Ee=t.memo(()=>{const[{step:e}]=t.useContext(M),[{step:s}]=t.useContext(l),[r,n]=f({opacity:1});return t.useEffect(()=>{s===S.ready&&(e===p.unset?n({opacity:.65},{duration:2e3}):e===p.entry&&n({opacity:0}))},[e,s]),c.jsx("div",{style:r})}),Se=t.memo(()=>{const[e,s]=f({opacity:1,scale:1}),[{step:r}]=t.useContext(M),[,n]=t.useContext(l);return t.useEffect(()=>{r===p.fadeOut&&s({opacity:0,scale:1.2},{duration:800,onEnd:()=>{n(o=>({...o,page:d.intro}))}})},[r]),c.jsx("div",{className:"Background",style:e,children:c.jsx(Ee,{})})}),we=t.memo(()=>{const e=t.useId(),[{step:s},r]=t.useContext(M),[{step:n}]=t.useContext(l),[o,a]=f({opacity:0,scale:1.5}),[i,m]=t.useState(!1);return t.useEffect(()=>{n===S.ready&&(s===p.entry?a({opacity:1,scale:1},{delay:500,onEnd:()=>{m(!0),Q.add(`#${e}`,()=>{r(A=>({...A,step:p.fadeOut}))})}}):s===p.fadeOut&&a({opacity:0},700))},[s,n]),c.jsx("div",{className:"Button",children:c.jsx("div",{id:e,style:o,className:h(i&&"pointer-events-auto cursor-pointer"),children:c.jsx("div",{})})})}),Me=t.memo(({index:e,onAnimated:s})=>{const[{step:r}]=t.useContext(M),[{step:n}]=t.useContext(l),[o,a]=f({opacity:0,y:50});return t.useEffect(()=>{n===S.ready&&(r===p.unset?a({opacity:1,y:0},{duration:1e3,delay:1e3+e*70,easing:y.inOutQuart,onEnd:()=>e===4&&s()}):r===p.entry&&a({opacity:0}))},[r,n]),c.jsx("div",{style:o,children:c.jsx("div",{})})}),be=t.memo(()=>{const e=t.useRef(void 0),[,s]=t.useContext(M),r=()=>{clearTimeout(e.current),e.current=setTimeout(()=>{s(n=>({...n,step:p.entry}))},Ae)};return c.jsx("div",{className:"Description",onPointerDown:()=>{clearTimeout(e.current),s(n=>({...n,step:p.entry}))},children:[...new Array(5).keys()].map(n=>c.jsx(Me,{index:n,onAnimated:r},n))})}),Ne=t.memo(()=>{const[{step:e}]=t.useContext(M),[{step:s}]=t.useContext(l),[r,n]=f({opacity:0});return t.useEffect(()=>{s===S.ready&&(e===p.entry?n({opacity:1},{duration:2e3,delay:1e3}):e===p.fadeOut&&n({opacity:0},700))},[e,s]),c.jsx("div",{className:"marker",style:r,children:c.jsx("div",{})})}),ke=t.memo(()=>{const[{step:e}]=t.useContext(M),[{step:s}]=t.useContext(l),[r,n]=f({opacity:0,x:40});return t.useEffect(()=>{s===S.ready&&(e===p.entry?n({opacity:1,x:0},{duration:1e3,delay:1200,easing:y.inOutQuart}):e===p.fadeOut&&n({opacity:0},700))},[e,s]),c.jsx("div",{className:"text",style:r,children:c.jsx("div",{})})}),Be=t.memo(()=>c.jsxs("div",{className:"Marker",children:[c.jsx(Ne,{}),c.jsx(ke,{})]})),Re=t.memo(()=>{const[,e]=t.useContext(F),s=t.useState(ee),[{page:r}]=t.useContext(l);return t.useEffect(()=>{s[0].step===p.entry?e({type:z.smokeEffect,state:!0}):e({type:z.smokeEffect,state:!1})},[s[0].step]),c.jsx("div",{className:h("Landing",r===d.landing?"visible":"invisible"),children:c.jsx(M.Provider,{value:s,children:c.jsxs(Y,{align:"top",children:[c.jsx(Se,{}),c.jsx(be,{}),c.jsx(Be,{}),c.jsx(we,{})]})})})}),Le=t.memo(({status:e,onGameOver:s,totalTime:r})=>{const[n,o]=t.useState(r/1e3);return t.useEffect(()=>{n<=0&&(B.stop(),s?.())},[n]),t.useEffect(()=>{e==="start"&&(B.reset(),B.add(({delta:a})=>{const i=r-a;o(Math.floor(i/1e3))}),B.play())},[e]),c.jsx("div",{className:"text",children:Math.max(n,0)})}),Ie=t.memo(({status:e,onGameOver:s,onFadeOut:r,totalTime:n=60})=>{const[o,a]=f({opacity:0});return t.useEffect(()=>{e==="start"?a({opacity:1}):e==="stop"&&(a({opacity:0},{duration:300,onEnd:()=>r?.()}),B.stop(),B.destroy())},[e]),c.jsxs("div",{className:"Countdown",style:o,children:[c.jsx("div",{className:"ico",children:c.jsx("div",{})}),c.jsx(Le,{status:e,onGameOver:s,totalTime:n})]})}),Qe=(e,s,r,n)=>{const o=e.getContext("2d");o&&o.drawImage(s,0,0,r,n)},Z=(e,s)=>{const r={x:0,y:0},n={x:0,y:0};if(s.offsetParent!==void 0&&s.offsetParent instanceof HTMLElement)do n.x+=s.offsetLeft,n.y+=s.offsetTop;while(s=s.offsetParent);return e instanceof TouchEvent?(r.x=e.touches[0].clientX-n.x,r.y=e.touches[0].clientY-n.y):(r.x=e.pageX-n.x,r.y=e.pageY-n.y),r},ze=(e,s)=>Math.sqrt(Math.pow(s.x-e.x,2)+Math.pow(s.y-e.y,2)),Ve=(e,s)=>Math.atan2(s.x-e.x,s.y-e.y),Ue=(e,s,r,n)=>{const o=s.getContext("2d");if(o){for(var a=o.getImageData(0,0,r,n),i=a.data,m=i.length,A=m/e,j=0,E=j=0;E<m;E+=e)parseInt(String(i[E]))===0&&j++;return Math.round(j/A*100)}},te=new Image;te.src="data:image/png;base64,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";const Oe=({children:e,cover:s,onComplete:r,percent:n=50,width:o=320,height:a=240,brushSize:i={width:50,height:50}})=>{const m=t.useRef(document.createElement("canvas")),[A,j]=t.useState(!1),[E,w]=t.useState("none"),[b,V]=t.useState(),N=t.useRef(!1),L=t.useRef({x:0,y:0}),ce=x=>{N.current=!1,x.removeEventListener("mousedown",U),x.removeEventListener("mousemove",O),x.removeEventListener("mouseup",W),x.removeEventListener("touchstart",U),x.removeEventListener("touchmove",O),x.removeEventListener("touchend",W)};t.useEffect(()=>{const x=new Image;x.onload=()=>{w("block"),V(x),j(!0)},x.src=s},[]);const U=x=>{N.current=!0,L.current=Z(x,m.current)},O=x=>{if(!N.current)return;x.preventDefault?.();const J=Z(x,m.current),ne=ze(L.current,J),K=Ve(L.current,J),I=m.current,P=I.getContext("2d");Array.from(Array(Math.floor(ne)).keys()).forEach(T=>{const{x:se,y:re}=L.current,oe=se+Math.sin(K)*T-i.width/2,ae=re+Math.cos(K)*T-i.height/2;P&&(P.globalCompositeOperation="destination-out",P.drawImage(te,oe,ae,i.width,i.height))}),L.current=J;const X=Ue(32,I,I.width,I.height);X&&X>=n&&(j(!1),r?.(),ce(I))},W=()=>{N.current=!1};return t.useEffect(()=>{if(b){const x=m.current;x&&(Qe(x,b,o,a),x.addEventListener("mousedown",U,!1),x.addEventListener("mousemove",O,!1),x.addEventListener("mouseup",W,!1),x.addEventListener("touchstart",U,!1),x.addEventListener("touchmove",O,!1),x.addEventListener("touchend",W,!1))}},[b]),c.jsxs("div",{className:"LescaScratchCard",style:{position:"relative",width:o,height:a,display:E},children:[e,A&&c.jsx("canvas",{ref:m,width:o,height:a,style:{position:"absolute",backgroundColor:"transparent",top:0,left:0}})]})};var u=(e=>(e[e.unset=0]="unset",e[e.dialog=1]="dialog",e[e.underBed=2]="underBed",e[e.dirt=3]="dirt",e[e.dirt2Clear=4]="dirt2Clear",e[e.clear=5]="clear",e[e.end=6]="end",e[e.fadeOut=7]="fadeOut",e[e.fail=8]="fail",e))(u||{});const q={step:0,isError:!1,clearTimes:0},v=t.createContext([q,()=>{}]),D=100,k=800,We=1e3,De=t.memo(({active:e})=>{const[s,r]=f({left:0});t.useEffect(()=>{e&&r({left:6},{easing:y.linear,duration:1e4})},[e]);const n=t.useMemo(()=>{if(s&&s.left){const o=parseInt(String(s.left));return`center ${100/6*o}% `}return"center 0%"},[s]);return c.jsx("div",{className:"footprint",style:{maskPosition:n},children:c.jsx("div",{})})}),Je=""+new URL("card-cover-n6ZhMQT8.jpg",import.meta.url).href,Pe=t.memo(()=>{const[e,s]=t.useState(!1),[r,n]=f({opacity:1,y:0,scale:1,left:0}),o=t.useMemo(()=>{const a=`skew(${r.left}deg, 0deg)`,i={...r};return delete i.left,{...i,transform:`${r.transform} ${a}`}},[r]);return c.jsx("div",{className:h("picture",e&&"shock"),style:o,onPointerDown:()=>{e||n({opacity:1,y:222,scale:1},{duration:500,easing:y.inQuart,onEnd:()=>{s(!0),n({opacity:1,left:-5,scale:1},{duration:300,easing:y.inOutQuart})}})}})}),Fe=t.memo(({position:e})=>{const[{page:s}]=t.useContext(l),[{step:r}]=t.useContext(v),[n,o]=f({opacity:1}),a=t.useRef(null),{x:i,y:m}=t.useMemo(()=>({x:e.x-(a.current?.offsetWidth||0)/2,y:Math.max(52,e.y-(a.current?.offsetWidth||0)/2)}),[e]);return t.useEffect(()=>{s===d.game&&r===u.dialog&&o({opacity:0},{duration:300})},[r,s]),c.jsx("div",{children:c.jsx("div",{className:"vacuum",children:c.jsx("div",{children:c.jsx("div",{children:c.jsx("div",{children:c.jsx("div",{ref:a,className:"item",style:{transform:`translate(${i}px, ${m}px)`,...n}})})})})})})}),Ye=t.memo(()=>{const[{step:e},s]=t.useContext(v),r=t.useRef(null),[n,o]=t.useState(!1),[a,i]=t.useState({x:300,y:window.innerHeight}),[m,A]=t.useState(!1),j=t.useRef({enabled:!1,active:!1});return t.useEffect(()=>{const E=()=>{r.current&&r.current.offsetWidth&&r.current.offsetHeight?o(!0):requestAnimationFrame(E)};E()},[]),t.useEffect(()=>{if(n&&r.current){const E=()=>{const[w]=r.current.getElementsByTagName("canvas");w?(w.addEventListener("pointerdown",()=>{j.current.enabled=!0}),w.addEventListener("pointermove",b=>{if(e===u.unset){const V=b.clientX-w.getBoundingClientRect().left,N=b.clientY-w.getBoundingClientRect().top;i({x:V,y:N}),j.current.enabled&&V>350&&!j.current.active&&(j.current.active=!0,A(!0))}}),w.addEventListener("pointerup",()=>{j.current.enabled=!1})):requestAnimationFrame(E)};E()}},[n]),c.jsxs("div",{className:"Background",children:[c.jsx("div",{className:"image"}),c.jsx("div",{className:h("clear",e>=u.clear&&"animate-fade-in-1s")}),e===u.unset&&c.jsx("div",{className:"card",children:c.jsx("div",{ref:r,children:c.jsx("div",{children:n&&c.jsx(Oe,{cover:Je,width:r.current?.offsetWidth,height:r.current?.offsetHeight,percent:60,onComplete:()=>{s(E=>({...E,step:u.dialog}))},brushSize:{width:150,height:150},children:c.jsx("div",{className:"content"})})})})}),e<=u.dialog&&c.jsx(De,{active:m}),e===u.unset&&c.jsx(Fe,{position:a}),e<=u.dialog&&c.jsx("div",{className:"mask"}),e<=u.dialog&&c.jsx(Pe,{}),e<=u.dialog&&c.jsx("div",{className:"light"})]})}),g="2",G=t.memo(({fill:e="none",active:s,onEnd:r})=>{const n=t.useRef(null),[o,a]=f({opacity:e==="none"?1:0});return t.useEffect(()=>{n.current&&s&&(e==="none"?[...n.current.getElementsByTagName("path"),...n.current.getElementsByTagName("line"),...n.current.getElementsByTagName("circle")].forEach(i=>{const m=i.getTotalLength();i.classList.add("on"),i.setAttribute("style",`stroke-dasharray:${m}; stroke-dashoffset:${m}`)}):a({opacity:1},{duration:7e3,easing:y.inSine,onEnd:()=>{r?.()}}))},[s]),c.jsxs("svg",{ref:n,style:o,className:"w-full",xmlns:"http://www.w3.org/2000/svg",width:"482",height:"438",viewBox:"0 0 482 438",children:[c.jsx("path",{id:"Union_7","data-name":"Union 7",d:`M28.7,43.4c1.2,0,1.9,0.6,1.9,1.9c0,1.5-0.6,2.5-1.9,2.8l-15.2,4.6c-2.8,0-4.3-1.4-4.3-4.2c0-3,1.1-4.6,3.2-5
        H28.7z M17.4,19.4c0.5,0,1.6,0.2,3.2,0.7c2.5,2.2,5.5,4.7,9,7.4c0.4,0.3,0.6,0.7,0.6,1.1c0,1.4-0.9,2.1-2.6,2.1
        c-0.3,0-0.8-0.1-1.6-0.3c-5-1.3-8.4-2.2-10.1-2.6c-2.1-1-3.2-2.6-3.2-4.9C12.8,20.6,14.3,19.4,17.4,19.4z M30.2,62.6
        c1.9,0,2.8,0.7,2.8,2.1c0,0.8-0.5,1.7-1.5,2.6c-7.1,6.6-11.7,9.8-13.7,9.8c-2.6,0-3.9-1.4-3.9-4.3c0-1.8,0.7-3,2-3.5
        C16.2,68.9,20.9,66.6,30.2,62.6z M34.5,30.4c1.9,0.2,3.3,0.3,4.2,0.3c1.7,0,3.7-0.9,6.1-2.8c0.7,0,1.1,0.5,1.1,1.5
        c0,1-0.9,3-2.7,5.9c-0.2,0.4-0.4,0.7-0.5,1c1.5-0.2,2.8-0.3,4.1-0.3c3.2,0,6.4,0.1,9.7,0.2c-0.4-0.2-0.5-0.5-0.5-0.9l-1.3-5.6
        c0-2.1,1.3-3.2,3.9-3.2c2.6,0,3.9,1.1,3.9,3.2l-2,5.7c-0.1,0.5-0.3,0.8-0.6,1.1c3.8,0.2,7.7,0.4,11.6,0.7c1,0,2-0.1,3-0.4
        c0.6-0.2,1.3-0.3,1.9-0.3c2.4,0,3.6,1,3.6,3.1c-0.1,0.3-0.1,0.6-0.3,0.9c-0.3,0.8-0.5,1.8-0.7,2.8c-0.2,1.1-0.4,2.2-0.5,3.4h4
        c3.3-0.1,6-0.4,8.1-1c1.4,0,2,0.7,2,2.1c0,2.1-1.1,4.4-3.3,6.9c-1.5,1.7-2.9,2.6-4.2,2.6c-1.1,0-2.7-0.4-4.7-1.3
        c-1-0.6-2.1-1.1-3.2-1.4c-0.2,1.8-0.4,3.7-0.6,5.7c0,1.6-0.7,2.4-2,2.4c-4.6,0-8.8,0.1-12.5,0.3c0.2,3.2,0.4,6.8,0.7,10.7
        c0,3.3-1.1,5.6-3.4,7c-2.3,1.3-4.8,1.9-7.5,1.9c-2.1,0-3.5-0.4-4.1-1.2c-0.4-1.2-1.2-2.5-2.4-3.8c-0.4-0.2-0.6-0.5-0.6-0.8
        c0-0.6,0.4-1,1.3-1c4.1,0,6.8-0.6,7.9-1.8c0.9-0.8,1.3-2.5,1.3-5c-0.1-2.1-0.1-4-0.2-5.8c-5.4,0.3-9.7,0.7-12.9,1.3
        c-2.1,0-3.2-1.1-3.2-3.3c0-0.7,0.4-1.6,1.3-2.7c0.9-1,2.2-1.5,3.6-1.5l11,0.1c0-1.1,0-2.2,0-3.4c0-0.5,0-1.1,0-1.6
        c-3.4,0.1-6.7,0.2-9.9,0.5c-2.4,0.2-6.2,1.3-11.2,3.3c-2.4,0-3.5-0.9-3.5-2.8c0-1.3,0.5-2.4,1.4-3.3c1.2-1.4,2.9-2,5-2
        c7.4-0.6,13.4-0.9,18.1-1.1c-0.1-1.4-0.3-2.7-0.4-4c0-0.6,0.1-1.1,0.2-1.5c-4.1,0.3-8.4,0.9-12.8,1.9c-2.1,0-3.2-0.8-3.2-2.4
        c0-0.2,0-0.5,0.1-0.8c-1.4-0.1-2.5-0.7-3.4-1.9c-1.1-1.7-1.7-3.6-1.7-5.8C33.4,31,33.8,30.4,34.5,30.4z M73,17.2
        c0.9,0,1.8,0.4,2.5,1.3c0.7,0.8,1.1,1.6,1.1,2.6c0,1.3-0.8,2.2-2.5,2.8c-9.6,1.1-19.4,1.7-29.3,1.9c-2.2,0-3.8-0.4-4.7-1.1
        c-0.9-0.8-1.4-1.8-1.4-2.8c0-1.2,0.9-1.9,2.6-1.9c3.7,0.2,6,0.4,7.1,0.4c4.9-0.1,8.9-0.3,12-0.8c4.4-0.4,8.1-1.1,11.2-1.9
        C72.1,17.4,72.6,17.2,73,17.2z M61.1,41.1c0.2,0.5,0.3,1,0.3,1.7c0.1,1.2,0.2,2.5,0.3,3.9h9.7c0-1.2,0-2.4,0.1-3.5
        c0-0.9-0.6-1.4-1.7-1.5C67.2,41.3,64.3,41.1,61.1,41.1z M61.7,52.1c0,0.6,0,1.1,0,1.6c0,1.1,0,2.2,0.1,3.5l8.9,0.1h0.4
        c0-1.5,0-2.9,0.1-4.3c-0.2-0.1-0.4-0.1-0.5-0.1C67.8,52.5,64.8,52.2,61.7,52.1z M72.7,25.5c0.1,0,0.2,0,0.4,0.1
        c2.5,0.9,4.5,1.6,6.1,1.9c1.2,0.3,2.6,0.4,4.2,0.4c0.6,0,1,0.5,1,1.5c0,0.9-1,2.3-3,4c-2.7,1.8-4.8,2.7-6.5,2.7
        c-0.3,0-0.5-0.2-0.7-0.6c-0.4-0.7-1.2-3.2-2.7-7.6c-0.1-0.4-0.2-0.6-0.2-0.9C71.4,25.9,71.8,25.5,72.7,25.5z`,transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("path",{d:`M416.6,15.3c1.9,0,2.8,0.8,2.8,2.4c0,1.1-0.4,2.2-1.2,3.2c-2.2,3.1-4.6,5.9-7.1,8.4c0.5,0.9,0.8,2,0.8,3.3
		c-0.5,4.9-0.7,9.4-0.7,13.4l0.7,24.5c0,5-1.4,7.4-4.2,7.4c-2.4,0-3.5-2.5-3.5-7.4C404.7,60,405,51.8,405,46c0-3.3-0.1-6.8-0.3-10.5
		c-0.4,0.3-0.7,0.6-1.2,0.9c-2.1,1.8-3.9,2.7-5.4,2.7c-1.5,0-3.3-0.7-5.2-2.2c-1.7-1.4-2.6-2.8-2.6-4.2c0-1.1,0.8-1.6,2.5-1.7
		c4.2-1,8-2.7,11.5-5c3.7-2.2,7.2-5.4,10.4-9.5C415.5,15.7,416.1,15.3,416.6,15.3z M458,31.9c3.2,0,4.9,1.7,4.9,5
		c0,1.2-0.9,2-2.7,2.6c-4,1.4-9.4,2.8-16.2,4.4c-4.9,1.3-7.8,1.9-8.7,1.9c-0.2,0-0.4,0-0.4,0c-0.2,5.7-0.6,12-1.1,18.8
		c0,0.9,0.6,1.5,1.8,1.7c2.1,0.2,7.4,0.4,15.9,0.4c7.3-0.1,14.3-1,21-2.8c0.9,0,1.3,0.8,1.3,2.5c0,1.9-0.8,4-2.3,6.5
		c-1.7,2.6-3.2,3.9-4.8,3.9c-1.3,0-12.8-1.1-34.5-3.3c-3.4-0.4-5-1.6-5-3.8c0.9-10.4,1.3-18.3,1.3-23.8c0-6-0.2-12.6-0.6-19.8
		c0-1.8,1.2-2.7,3.5-2.7c2.6,0,3.9,1.2,3.9,3.5c0,4.2-0.1,8.8-0.3,13.9c9-2.8,16-5.5,21-8C456.9,32.1,457.5,31.9,458,31.9z`,transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("path",{d:`M26.5,383.2l5.2,0.8c20.9,0,34.9-0.3,42.2-0.8c1.2,0,1.9,0.8,1.9,2.5c0,1.2-0.5,2.3-1.6,3.3
		c-1.2,1.4-2.6,2-4.2,2c-2.9-0.3-6.5-0.5-10.9-0.7c0,3.8-0.4,8.5-1.2,14.2c0,1,0.3,1.6,1,1.7c1.3,0.4,4.5,0.5,9.7,0.5
		c7.1-0.1,13.8-0.9,20.2-2.2c1,0,1.5,0.9,1.5,2.6c0,1.8-0.8,3.8-2.5,6.1c-1.8,2.5-3.4,3.7-5,3.7c-1.1,0-10.3-1.1-27.5-3.4
		c-2.7-0.4-4.1-1.8-4.1-4.1c0.8-5,1.2-8.9,1.2-11.6c0-2.4-0.2-5-0.6-7.8c-1.8-0.1-3.7-0.1-5.5-0.1c-1.4,6.4-3.2,11.2-5.7,14.3
		c-2.3,3.1-5.7,6-10.3,8.6c-4.4,2.5-8,3.7-10.6,3.7c-2.5,0-4.9-1.3-7.4-3.9c-1.9-2.1-2.9-3.9-2.9-5.6c0-1.5,0.5-2.2,1.5-2.2l4.6,0.7
		c3.8,0,7.4-0.5,10.6-1.6c4.1-1.4,7.3-3,9.4-5c2.5-2.3,4-5.2,4.3-8.6v-0.4c-3.5,0-8.3,0.6-14.4,1.9c-2.9,0-4.3-1.1-4.3-3.2
		c0-1.3,0.6-2.5,1.8-3.7C24,383.8,25.2,383.2,26.5,383.2z M49.2,352.4c3,0,4.5,1.3,4.5,3.9c-0.5,1.8-0.8,3.4-1,4.8
		c8.7,0.2,16.4,0.7,23,1.7l5.6-1.1c2.6,0,3.9,0.8,3.9,2.4c0,0.6-0.3,1.2-0.8,1.8c-1.4,2.2-2.4,5.6-3.1,10.4c0,2.3-1.2,3.5-3.5,3.5
		c-2.3,0-3.5-1-3.5-3.1c0-3,0.4-5.8,1.1-8.2c-5.8-1.2-13-1.8-21.7-1.8c-11.7,0-21.6,0.9-29.8,2.6c-0.2,5-0.7,7.8-1.3,8.5
		c-0.5,1.4-1.7,2-3.5,2c-1.9,0-2.9-0.7-2.9-2c0-5.4-0.6-10.2-1.7-14.3c0-2.1,1.3-3.2,3.9-3.2c1.2,0,2.4,0.2,3.6,0.6
		c1.1,0.5,2.3,0.8,3.5,0.9c5.3-0.5,12.1-0.7,20.5-0.7c-0.3-1.7-0.7-3.2-1.3-4.7C44.6,353.7,46.1,352.4,49.2,352.4z M36.8,371.5
		c2.3,0.5,4.3,0.8,5.9,0.8l6.6-0.4h8l7.2-0.4c1.4,0,2,0.9,2,2.8c0,1.1-0.5,2.1-1.5,2.8c-0.8,0.7-1.7,1.1-2.7,1.1
		c-2.6-0.2-5.6-0.4-9-0.4c-3.4,0-6.8,0.2-10.1,0.5c-2.5,0.1-5.1,0.5-7.8,1.2c-2.8,0-4.2-1-4.2-3.1c0-1.1,0.7-2.3,2-3.6
		C34,372,35.2,371.5,36.8,371.5z`,transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("path",{d:`M412.1,368.7l4.9,0.4l19.4,0.3c-0.1-2.8-0.2-5.7-0.3-8.8c0-2.1,1.2-3.2,3.5-3.2c2.8,0,4.3,1.3,4.3,3.9
		c-0.5,3-0.8,5.7-0.9,8.1l16.5,0.1c2.9,0.2,4.3,1.1,4.3,2.7c0,2.1-1.8,3.2-5.4,3.2L443,375c0.1,3.9,0.6,7.9,1.5,11.9
		c0.9,3.7,2.7,7.3,5.2,10.8c0.7-1.2,1.4-2.4,1.9-3.7c1.5-2.7,2.6-6.1,3.5-10c0.2-1,0.9-1.5,1.9-1.5c2.1,0,3.2,1.1,3.2,3.3
		c-0.8,2.3-1.6,4.7-2.2,7.3c-0.7,2.8-1.6,5.7-2.9,8.8c-0.2,0.4-0.4,0.8-0.5,1.2c1.8,1.5,3.7,2.7,5.8,3.8c3,1.6,7.4,3,13.2,4.2
		c1.2,0.5,1.9,1.3,1.9,2.4c0,1.7-1.6,3.5-4.9,5.5c-3.2,2-6.3,3-9.3,3c-2,0-3.7-0.6-5.1-1.9c-2.7-2.4-5-4.8-7-7.4
		c-1.4,1.7-2.8,3.1-4.2,4.3c-2.4,2-4.1,3-5.3,3c-2.5,0-4.9-0.7-7.2-2.1c-2.3-1.2-3.5-2.9-3.5-5c0-0.5,0.4-0.8,1.3-0.9
		c3.4-0.2,6.3-1.1,8.8-2.5c1.8-0.9,3.5-2.3,5.2-4.2c-3-5.2-4.9-10.5-5.8-15.9c-0.7-3.5-1.3-8.3-1.8-14.4l-2.6-0.1
		c-8.3,0-15.4,0.4-21.3,1.1v0.3l0.1,6.6c0.5-0.1,1.1-0.2,1.6-0.2c4.7,0,8.1,0.4,10.3,1.1c1.2,0,2.7-0.2,4.6-0.7
		c2.6,0,3.9,1.2,3.9,3.5l-0.4,0.8c-0.5,1.5-1,3.7-1.5,6.6c-0.5,3-0.9,6.1-1.1,9.6c-0.1,2.3-0.8,4-2.2,5.2c-1.4,1-4,1.5-7.6,1.5
		c-2.3,0-3.7-0.7-4.1-2.1c-0.5-1.6-1.4-3.6-2.7-6c0-0.9,0.6-1.3,1.9-1.3l4.9,0.4c1.4,0,2.3-0.1,2.7-0.4c0.5-0.3,0.7-0.8,0.8-1.5
		c0.8-4,1.4-7,1.8-8.9c0-0.8-0.1-1.2-0.3-1.2c-0.8-0.4-1.9-0.5-3.3-0.5c-2.5,0-5.6,0.4-9.4,1.1c-0.2,5.1-0.9,9.4-2,12.8
		c-1.7,4.4-4.1,8.1-7.4,11.2c-2,1.9-3.7,2.8-5,2.8c-2.1,0-4.2-0.9-6.5-2.7c-2.2-2.1-3.4-3.8-3.4-5.3c0-1.2,0.7-2,2-2.2
		c2.2-0.2,4.2-0.8,5.9-1.7c3-1.4,5.3-3.9,6.9-7.5c1.4-3.2,2-7.3,2-12.3c0-3.2-0.3-7.6-1-13.2c0-2.4,1.2-3.5,3.5-3.5
		c1.5,0,2.6,0.2,3.5,0.7H412.1z M457.8,358.1c2.2,0.2,3.5,1.3,3.9,3.1c0,1.2-0.2,2.1-0.7,2.8c-3.9,2.5-6.6,4-8.1,4.3
		c-1.5,0-2.2-0.6-2.2-1.7c0-0.3,1.3-2.7,3.9-7.1C455.2,358.6,456.3,358.1,457.8,358.1z`,transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("path",{d:`M162.5,155.5c1.7,0,3.1,0.2,4.2,0.5c0.9-0.5,1.8-0.8,2.6-0.9c4.4-0.9,10-1.4,16.7-1.4c3.3,0,6.4,0.3,9.4,0.9
		c2.7,0,7.1-0.9,13.4-2.6c5.7,0,8.5,2.8,8.5,8.5c0,1.7-0.5,4.1-1.4,7.1c-2.4,10-3.5,21.6-3.5,34.6c0,7.1,0.2,13.7,0.5,19.8
		c0.9,7.5,1.4,13.7,1.4,18.6c0,8.2-2.8,12.2-8.5,12.2c-3,0-5.1-1.2-6.4-3.5c-2-3.3-3.1-6.8-3.1-10.6c0-5.5,0.2-12.8,0.5-21.9
		c-12.2,0.3-21,1.6-26.1,3.8c-0.3,3.6-0.9,6.8-1.9,9.7c-2,6.3-5.4,11.4-10.1,15.3c-4.4,3.6-8.1,5.4-11.1,5.4
		c-3.8,0-8.1-1.9-12.9-5.7c-5.2-3.9-7.8-7.1-7.8-9.7c0-1.9,1.5-3.4,4.5-4.5c8.2-1.9,14.4-5.4,18.8-10.6c4.6-5,6.8-15.4,6.8-31.1
		c0-8.5-1.3-17.5-4-27.1C153,157.8,156.2,155.5,162.5,155.5z M154.9,87.9c2.5,0,4.9,0.6,7.3,1.6c2.4,1.3,4.7,2,7.1,2.1
		c1.7-1.3,4.2-1.9,7.5-1.9c13,0,24.3,0.9,33.9,2.6l11.1-1.6c4.6,0,6.8,1.8,6.8,5.4c0,1.7-0.6,3.6-1.6,5.7c-2.8,6.8-4.8,17.4-5.9,32
		c0,1.9-0.3,3.5-0.9,4.7c0.6,0.2,1.2,0.2,1.6,0.2l11.3-2.1c4.6,0,6.8,2,6.8,5.9c0,0.9-0.6,2-1.6,3.1c-0.3,0.5-0.6,0.9-0.7,1.2
		c2.2-0.2,4.2-0.5,5.9-1.2c3.6-1.1,7.1-2.7,10.4-4.7c4.4-2.5,8-5.1,10.8-7.8c-6.8,0.3-13.8,1.2-21.2,2.6c-5.7,0-8.5-2.1-8.5-6.4
		c0-2.4,1.3-4.9,4-7.5c1.9-1.9,4.3-2.8,7.3-2.8c4.2,1.1,8,1.7,11.3,1.9c-2-1.7-3.3-4.6-3.8-8.5l-0.9-3.5c-7.4,0.8-13.3,2-17.9,3.5
		c-4.9,0-7.3-2.6-7.3-7.8c0-1.7,1-3.8,3.1-6.4c2.2-2.7,5.3-4,9.2-4h8.7l-0.2-0.9c0-5.7,3.1-8.5,9.4-8.5c6.9,0,10.4,3.1,10.4,9.4h3.8
		c3.9,0,7.5,0.7,10.8,2.1c2.7,1.1,4,3.2,4,6.4c0,3.3-1.8,4.9-5.4,4.9c-5.3,0-10.2,0.1-14.6,0.2L266,115c-0.2,3-0.9,4.9-2.4,5.7
		l25.9-0.7h32c-1.7-1.3-2.6-3.5-2.6-6.8l-0.2-4.9c-4.6,0.6-9.6,1.4-15.1,2.4c-5.7,0-8.5-2.3-8.5-6.8c0-2.5,1.3-5.1,3.8-7.8
		c2.2-2.4,4.7-3.5,7.5-3.5l11.5,0.9c0.8-5.7,3.9-8.5,9.4-8.5c6.1,0,9.2,2.7,9.2,8.2c7.4-0.2,12.7-0.4,16-0.7c2.5,0,3.8,2,3.8,5.9
		c0,2.2-1.1,4.2-3.3,6.1c-2.7,2.8-5.7,4.2-8.9,4.2c-1.9-1.4-5-2.1-9.4-2.1h-1.2l-2.4,9.4c-0.8,1.7-1.7,2.9-2.8,3.5l9.4-0.5
		c3,0,4.5,1.8,4.5,5.4c0,2.4-0.9,4.4-2.8,6.1c-1.7,1.6-3.6,2.4-5.7,2.4c-6.4-0.3-13.4-0.5-21-0.7c0.8,1.4,1.2,2.9,1.2,4.5
		c0,2.8-0.2,5.9-0.5,9.2c7.5-2.7,13.7-5.1,18.4-7.3c0.8-0.5,1.4-0.7,1.9-0.7c6.9,0,10.4,3.5,10.4,10.4c0,0.9-0.9,1.6-2.8,2.1
		c-4.4,1.1-10.3,2.3-17.7,3.5c-5.3,1.1-8.6,1.6-9.7,1.6h-1.2c-0.2,2-0.4,4-0.7,5.9c0,1.7,0.1,2.7,0.2,2.8c0.3,0.5,1.2,0.7,2.6,0.7
		c12.1-0.2,23.8-1.6,35.1-4.5c1.7,0,2.6,1.5,2.6,4.5c0,3.9-0.9,8.2-2.8,12.9c-2.4,5.2-4.6,7.8-6.6,7.8c-1.4,0-14.5-2.2-39.3-6.6
		c-3.8-1.1-5.7-3.8-5.7-8.2c1.3-9.4,1.9-16.6,1.9-21.4c0-4.4-0.6-9.3-1.9-14.6c0-1.1,0.2-2,0.7-2.6h-0.9c-9.4,0-18.3,0.2-26.6,0.7
		c0.3,0.6,0.5,1.3,0.5,1.9c0,0.8-0.6,2.1-1.9,4c-0.5,0.8-0.9,1.4-1.4,1.9h4l3.8,0.9c4.6-1.9,7.7-2.8,9.4-2.8c5,0,7.5,1.8,7.5,5.4
		c0,0.6-0.5,1.6-1.4,3.1c-7.2,11.3-12.9,19.5-17.2,24.7c-4.7,5.7-9.3,10.1-13.7,13.4c-0.8,0.6-1.6,1.1-2.4,1.4
		c1.3-0.2,2.4-0.2,3.5-0.2c6.4,0,9.7,2.5,9.7,7.5c0,0.5-0.2,1.4-0.5,2.8v2.6c9.3-0.3,17.9-0.6,25.9-0.9c0-0.8,0-1.3,0-1.6
		c0-6.9,2.7-10.4,8.2-10.4c6.1,0,9.3,3.9,9.4,11.8c6.9-0.2,13.2-0.2,18.8-0.2L351,196c3.6,0,5.4,2,5.4,5.9c0,3.5-1.8,7.1-5.4,10.8
		c-4.9,4.7-10,7.1-15.3,7.1c-6-1.9-13.1-3.5-21.4-4.7c0.5,6.9,1.3,14.8,2.6,23.5c0,11.1-3.5,16.7-10.4,16.7c-3.8,0-5.9-2.8-6.4-8.5
		c-1.3-3.5-1.9-12.2-1.9-26.1c0-2.5-0.1-4.9-0.2-7.3c-5.5-0.3-10.5-0.5-15.1-0.5c-4.2,0-8.1,0.1-11.5,0.2v12.9c0,6-0.7,11-2.1,15.1
		c-1.3,4.1-3.8,7.6-7.5,10.6c-3,2.4-5.7,3.5-8,3.5c-3.6,0-7.8-1.7-12.5-5.2c-5.5-4.2-8.2-7.5-8.2-9.7c0-2.2,1.6-3.8,4.9-4.9
		c6-1.1,10.5-3.1,13.7-6.1c3-2.7,4.6-7.7,4.9-15.1c-2,0.2-4,0.4-5.9,0.7c-6,0.6-13,2.2-21.2,4.7c-5.7,0-8.5-2.8-8.5-8.5
		c0-2.7,1.3-5.6,4-8.7c3-3,5.7-4.5,8-4.5c2.7,0,5.8,0.3,9.4,0.9c4.2,0.5,8.4,0.7,12.5,0.7c-0.5-2.2-1.2-4.4-2.1-6.6
		c0-1.3,0.3-2.4,0.9-3.3c-0.6,0.3-1.1,0.6-1.4,0.7c-2.4,1.3-4,1.9-4.9,1.9c-3.9,0-7.9-1.3-11.8-4c-3.5-2.2-5.2-4.6-5.2-7.3
		c0-2.8,1.2-4.5,3.5-4.9c5.3-0.6,10.4-1.9,15.1-3.8c2.7-1.1,5.2-2.4,7.5-4l-8.2-5.4c-1.7-0.6-2.7-1.8-2.8-3.5
		c-2.7-0.6-5.3-1.7-7.8-3.3c-1.6-0.9-2.6-1.8-3.1-2.6c-1.1,3.6-2,7.7-2.6,12.2c0,5-2.2,7.5-6.6,7.5c-4.2,0-6.4-2.2-6.4-6.6
		c0-5.8,0.3-11.1,0.9-15.8c-6.6-1.9-14.8-2.8-24.7-2.8c-18.8,0-34.8,1.8-47.8,5.4c-0.3,9.3-1,14.7-2.1,16.2
		c-0.9,2.4-3.4,3.5-7.3,3.5c-3.9,0-5.9-1.2-5.9-3.5c0-11.3-1.2-21-3.5-29.2c0-4.6,2.8-6.8,8.5-6.8c2.4,0,4.7,0.6,7.1,1.6
		c2,1.1,4.1,1.7,6.1,1.9c0-16.6-1.3-31-3.8-43.1C146.7,90,149.4,87.9,154.9,87.9z M163.9,136.2c4.9-0.3,10.1-0.5,15.8-0.5
		c10.4,0,19.9,0.4,28.5,1.2c-0.2-0.8-0.2-1.5-0.2-2.1c0-10.8,0.3-20.9,0.9-30.1c-4.4-1.7-9.8-2.6-16.2-2.6
		c-10.8,0-19.9,1.9-27.3,5.7c0,3.8-0.1,7.2-0.2,10.4h0.2c4.4-0.6,8-1.8,10.8-3.5c3.6-2,7.5-5.5,11.5-10.4c0.5-0.3,0.9-0.5,1.4-0.5
		c1.7,0,2.6,0.9,2.6,2.8c0,1.1-0.2,2.4-0.5,3.8c-0.3,1.4-0.7,2.7-1.2,3.8c0.6,0,1.4,0.3,2.4,0.9l11.8,8.9c1.1,0.6,1.6,1.4,1.6,2.4
		c0,3.3-1.3,4.9-3.8,4.9c-0.9,0-2-0.3-3.1-0.9l-12.7-5.4c-0.8,1.9-1.6,3.7-2.6,5.4c-0.9,1.7-1.6,2.6-2.1,2.6c-5.2,0-10-2.1-14.6-6.4
		c-1.1-0.6-1.8-1.2-2.1-1.6C164.5,130.7,164.2,134.5,163.9,136.2z M171.4,178.8c1.1-0.3,2.2-0.5,3.3-0.5h17c2.4,0,4.6,0.2,6.6,0.7
		c0-2.8,0.1-5.6,0.2-8.2c0-3.3-2.3-4.9-6.8-4.9c-9.6,0-15.5,0.6-17.7,1.6c-1.3,0.9-2.1,1.4-2.6,1.4V178.8z M171.4,204.7
		c0.9-0.2,1.7-0.2,2.4-0.2h17.9c2.2,0,4.1,0.2,5.6,0.5c0.2-4.4,0.3-9.2,0.5-14.4c-12.2,0.2-21,1.3-26.4,3.5V204.7z M257.6,156
		l6.1,7.1c3.1-2.7,6.2-5.7,9.2-9.2c0.5-0.5,0.7-0.9,0.7-1.2c0-0.5-0.9-0.7-2.6-0.7c-2.2,0-4.7,0.2-7.5,0.5c-1.6,0.3-3,0.7-4.2,1.2
		C258.6,154.5,258,155.3,257.6,156z`,transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("path",{d:`M135.5,278.1c3.5,0.7,6.6,1.1,9.1,1.1l26.8-0.4c0-0.7,0-1.5-0.1-2.2c0-6,1.7-9.1,5.2-9.1
		c3.7,0,5.6,2.3,5.6,6.8v4.3h29.6l10.1-0.6c2.1,0,3.2,1.4,3.2,4c0,1.6-0.7,3-2.1,4.3c-1.2,1.2-2.6,1.8-4,1.8
		c-10.4-0.4-22.6-0.6-36.6-0.6H182v6.7h1.3c4.8,0,10.5,0.1,17,0.4c1.9,0,4.3-0.1,7.3-0.4c4.5,0,6.7,1.7,6.7,5
		c-0.5,0.5-1.2,2.2-2.1,5.3c-0.4,2.9-0.6,6-0.6,9.4c0.4,8.1,0.6,12.5,0.6,13.1c0,3.3-1.9,5.1-5.7,5.6c-6-0.6-11.5-1-16.6-1.3
		c7.9,3.3,15.4,6,22.5,8.2c8,2.6,16.3,4,24.8,4.2c2.5,0,3.9,0.8,4,2.4c0,2.7-3.3,6.4-9.8,11c-3.9,2.6-8.5,3.9-13.7,3.9
		c-1.2-0.1-2.4-0.6-3.6-1.4c-8.5-6-18.9-13.4-31.3-21.9c0.2,6.5,0.4,11.9,0.7,16.2c0,9.2-2,13.8-6.1,13.8c-4.1,0-6.1-3.7-6.1-11.2
		c0.3-7.3,0.5-13.7,0.7-19.4c-4.5,4.7-10.9,9.7-19.4,14.9c-9.4,5.2-16.8,7.8-22.1,7.8c-3.5,0-7-1.5-10.3-4.5
		c-3.1-2.4-4.6-4.8-4.6-7.3c0-0.7,1.1-1.2,3.4-1.3c10.4-0.1,20.6-2.1,30.4-6c7-2.6,13.3-6,19-10.1c-6.4,0.2-10.7,0.4-12.8,0.7
		c-2.6,0.2-5.7,0.7-9.2,1.7c-3.7,0-5.6-1.9-5.6-5.6c1-5.9,1.5-11,1.5-15.4c0-3.7-0.5-8.1-1.5-13.1c0-4.1,2-6.1,6-6.1
		c2,0,4.1,0.2,6.1,0.6c2,0.4,5.1,0.6,9.1,0.6h10.3c-0.1-2.1-0.2-4.3-0.3-6.6c-5.8,0.1-11.4,0.3-17,0.6c-6.6,0.2-13.6,0.8-20.9,2
		c-4.1,0-6.1-1.7-6.1-5c0-1.6,0.8-3.3,2.5-5.2C131.7,278.8,133.5,278.1,135.5,278.1z M172.5,323c0-2.3,0-4.4,0.1-6.1
		c-7.5,0.4-13.7,0.9-18.6,1.5c-0.2,1.6-0.4,3.1-0.7,4.6c0,0.7,0.6,1.1,1.7,1.1C160.3,323.4,166.1,323,172.5,323z M154.9,308.3h17.7
		c0-1.7,0-3.5-0.1-5.4c-4.8-0.1-10.1-0.1-15.6-0.1c-0.9,0-1.5,0.4-1.8,1.3C155.1,305.5,155,306.9,154.9,308.3z M182.1,303.1v5.2
		h17.5c-0.1-1.9-0.2-3.3-0.3-4.3h-1.1C193.7,303.6,188.4,303.3,182.1,303.1z M182.3,316.5c0,2.2,0,4.4,0.1,6.6
		c5.1,0.1,10.6,0.4,16.3,1c0.7,0,1-0.4,1.1-1.1c0-2.6,0-4.8-0.1-6.7C193.2,316.3,187.4,316.4,182.3,316.5z`,transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("path",{d:`M302.7,276c8.7,0,19,0.2,30.7,0.6c9,0.3,16.7,0.4,22.9,0.4c4.8,0,8.7-0.1,11.7-0.4c2.6,0,3.9,1.3,3.9,3.9
		c0,3.5-1.5,7.3-4.5,11.3c-2,2.8-3.9,4.2-5.6,4.2c-2.4,0-5.8-0.9-10.2-2.7c-6.4-3-13.6-5-21.5-6c-2.9-0.5-5.9-0.8-8.9-1.1
		c0,6-0.1,12.5-0.4,19.5c5.7,0.1,12,0.4,18.8,0.8c1.9,0,4.3-0.3,7.3-1c4.1,0,6.1,1.9,6.1,5.6c-0.5,0.7-1.2,3.4-2.1,8.1
		c-0.6,4.6-0.8,9.4-0.8,14.5c0.4,14,0.6,21.5,0.6,22.5c0,3.5-1.8,5.6-5.4,6.1c-15.1-1.1-28.7-1.7-40.8-1.7c-13.8,0-22.4,0.2-26,0.7
		c-3.2,0.2-7,0.7-11.6,1.5c-3.7,0-5.6-1.8-5.6-5.4c1.2-9,1.8-16.8,1.8-23.5c0-6.7-0.6-14.7-1.8-24c0-3.7,1.9-5.6,5.6-5.6
		c2,0,3.9,0.2,5.7,0.6c1.9,0.4,4.7,0.6,8.4,0.6h9.8c0.1-1.3,0.1-2.6,0.1-3.9c0-3.9-0.5-9.2-1.5-15.9c-5.6,0.2-11,0.6-16.3,1.1
		c-5.6,0.6-14.1,3.1-25.7,7.5c-4.5,0-6.7-1.7-6.7-5.2c0-2.1,0.9-4,2.7-5.6c2.1-2.5,5-3.8,8.7-3.8C274.2,277.3,291.1,276,302.7,276z
		 M304.5,352c10.2,0,21.5,0.2,33.9,0.6c0.7,0,1.2-0.4,1.3-1.1c0-5.9,0-11-0.1-15.4c-1.1,0.5-2.4,0.7-3.8,0.7l-8.5-0.4
		c-4.5,0-8.3,0.5-11.6,1.5c-3.7,0-5.6-1.3-5.6-3.8c0.5-7.5,0.7-13.9,0.7-19c-3.5-0.1-7.2-0.1-10.9-0.1c-0.3,3.6-0.8,6.7-1.5,9.4
		c-1.6,5.6-4,10.4-7.3,14.4c-1.9,2.4-3.4,3.6-4.5,3.6c-2.7,0-5.6-1.2-8.7-3.6c-2-1.8-3.2-3.3-3.6-4.6c-0.2,5.7-0.6,11.4-1.3,17.3
		c0,0.7,0.6,1.1,1.8,1.1C283.4,352.2,293.3,352,304.5,352z M274.6,329.8c0.6-0.4,1.2-0.6,1.8-0.7c2.2-0.4,4.2-1.1,5.9-2.2
		c2.9-1.7,5.1-4.9,6.6-9.6c0.3-0.7,0.5-1.4,0.7-2.2h-13.1c-0.7,0-1.3,0.4-1.5,1.3C274.9,320.8,274.8,325.3,274.6,329.8z
		 M310.7,305.6c-0.1-6-0.3-12.8-0.6-20.1c-2.6-0.1-5.3-0.1-8-0.1h-1.7c-0.2,1.6-0.3,3.4-0.3,5.3l0.1,14.7v0.3H310.7z M320.6,315.3
		c-0.2,3.5-0.4,7.2-0.6,10.9c0,1.2,1,1.8,2.9,1.8h11.2c2.2,0,4,0.2,5.3,0.6c-0.1-5.5-0.2-9.6-0.3-12.3c0-0.4-0.4-0.6-1.3-0.6
		C332.9,315.5,327.1,315.4,320.6,315.3z`,transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("line",{x1:"110",y1:"47",x2:"372",y2:"47",transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("line",{x1:"110",y1:"389.6",x2:"372",y2:"389.6",transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("line",{x1:"48.8",y1:"112.4",x2:"48.8",y2:"325.6",transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("line",{x1:"432.1",y1:"112.4",x2:"432.1",y2:"325.6",transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:e,strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("circle",{cx:"49.9",cy:"49.9",r:"48.9",transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:"none",strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("circle",{cx:"432.1",cy:"49.9",r:"48.9",transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:"none",strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("circle",{cx:"49.9",cy:"388.1",r:"48.9",transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:"none",strokeMiterlimit:"10",strokeWidth:g,opacity:"1"}),c.jsx("circle",{cx:"432.1",cy:"388.1",r:"48.9",transform:"translate(0.5 0.5)",stroke:e==="none"?"#ea0029":"none",fill:"none",strokeMiterlimit:"10",strokeWidth:g,opacity:"1"})]})}),He=({children:e,active:s})=>{const[,r]=t.useContext(v),[n,o]=f({opacity:1});return t.useEffect(()=>{s&&o({opacity:0},{duration:1e3,onEnd:()=>r(a=>({...a,step:u.end}))})},[s]),c.jsx("div",{style:n,children:e})},qe=t.memo(()=>{const e=t.useRef(null),[{page:s}]=t.useContext(l),[{step:r}]=t.useContext(v),[n,o]=t.useState(!1);return t.useEffect(()=>{r===u.clear&&s===d.game&&e.current&&(e.current.currentTime=0,e.current.play())},[r,s]),c.jsxs("div",{className:h("Clear",r===u.clear?"visible":"invisible"),children:[c.jsx("div",{children:c.jsx($,{ref:e,src:fe,muted:!0,autoPlay:!1,loop:!1,width:1280,height:720,playsInline:!0})}),c.jsx("div",{children:c.jsx("div",{children:c.jsxs(He,{active:n,children:[c.jsx(G,{fill:"none",active:r===u.clear}),c.jsx(G,{fill:"#ea0029",active:r===u.clear,onEnd:()=>{o(!0)}})]})})})]})}),Ke=t.memo(({index:e})=>{const[{page:s}]=t.useContext(l),[r,n]=f({opacity:0,y:e===0?0:50,scale:e!==0?1:2});return t.useEffect(()=>{s===d.game&&n({opacity:1,y:0,scale:1},{duration:e===0?300:500,delay:800+(e===0?0:300)+e*100})},[s]),c.jsx("div",{className:`text-${e}`,style:r})}),Xe=t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:0,scale:0,rotate:90});return t.useEffect(()=>{e===d.game&&r({opacity:1,scale:1,rotate:0},{duration:500,delay:1800})},[e]),c.jsx("div",{className:"image",style:s})}),Te=t.memo(({setFadeOut:e})=>{const[{page:s}]=t.useContext(l),r=t.useId(),[n,o]=f({opacity:0,scale:2}),[a,i]=t.useState(!1);return t.useEffect(()=>{s===d.game&&o({opacity:1,scale:1},{duration:500,delay:2200,onEnd:()=>{i(!0),Q.add(`#${r}`,()=>{Q.remove(`#${r}`),i(!1),e(!0)})}})},[s]),c.jsx("div",{id:r,className:h("button",a&&"pointer-events-auto cursor-pointer"),style:n,children:c.jsx("div",{})})});t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:0,x:50});return t.useEffect(()=>{e===d.game&&r({opacity:1,x:0},{duration:500,delay:2800,easing:y.outBack})},[e]),c.jsx("div",{className:"f25",style:s})});const Ze=t.memo(()=>{const[e,s]=f({opacity:0,scale:.2}),[{step:r},n]=t.useContext(v),[{page:o}]=t.useContext(l),[a,i]=t.useState(!1);return t.useEffect(()=>{o===d.game&&r===u.dialog&&s({opacity:1,scale:1},{duration:500})},[r,o]),t.useEffect(()=>{a&&s({opacity:0},{duration:500,onEnd:()=>{n(m=>({...m,step:u.underBed}))}})},[a]),c.jsx("div",{className:h("Dialog",o===d.game&&r===u.dialog?"visible":"invisible"),children:c.jsx("div",{className:"dialog",style:e,children:c.jsx("div",{children:c.jsx("div",{children:c.jsxs("div",{className:"ctx",children:[[...new Array(5).keys()].map(m=>c.jsx(Ke,{index:m},`text-${m}`)),c.jsx(Xe,{}),c.jsx(Te,{setFadeOut:i})]})})})})})}),Ge=t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:0,x:100}),[{step:n}]=t.useContext(v);return t.useEffect(()=>{e===d.game&&n===u.end&&r({opacity:1,x:0},800)},[n,e]),c.jsx("div",{className:"t0",style:s})}),$e=t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:0,scale:1.2}),[{step:n}]=t.useContext(v);return t.useEffect(()=>{e===d.game&&n===u.end&&r({opacity:1,scale:1},{duration:800,delay:300})},[n]),c.jsx("div",{className:"t1",style:s})}),_e=t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:0,y:50}),[{step:n}]=t.useContext(v);return t.useEffect(()=>{e===d.game&&n===u.end&&r({opacity:1,y:0},{duration:800,delay:800})},[n]),c.jsx("div",{className:"t2",style:s})}),et=t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:0}),[{step:n}]=t.useContext(v);return t.useEffect(()=>{e===d.game&&n===u.end&&r({opacity:1},{duration:800,delay:1200})},[n]),c.jsx("div",{className:"t3",style:s})}),tt=t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:0,y:50}),[{step:n}]=t.useContext(v);return t.useEffect(()=>{e===d.game&&n===u.end&&r({opacity:1,y:0},{duration:800,delay:1200})},[n]),c.jsx("div",{className:"t4",style:s})}),ct=t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:0}),[{step:n}]=t.useContext(v);return t.useEffect(()=>{e===d.game&&n===u.end&&r({opacity:1},{duration:800,delay:2500})},[n]),c.jsx("div",{className:"steam-text",style:s,children:c.jsx(xe,{scale:.76,noise:{x:50,y:50}})})}),nt=t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:0}),[{step:n}]=t.useContext(v);return t.useEffect(()=>{e===d.game&&n===u.end&&r({opacity:1},{duration:800,delay:2500})},[n]),c.jsx("div",{className:"t5",style:s})}),st=t.memo(()=>{const[{page:e}]=t.useContext(l),[{step:s},r]=t.useContext(v);t.useEffect(()=>{e===d.game&&s===u.end&&setTimeout(()=>{r(o=>({...o,step:u.fadeOut}))},ie+2500+800)},[s]);const n=()=>{r(o=>({...o,step:u.fadeOut}))};return c.jsx("div",{className:h("absolute top-0 left-0 h-full w-full",e===d.game&&s===u.end?"visible":"invisible"),onPointerDown:n})}),rt=t.memo(()=>{const[{page:e}]=t.useContext(l),[{step:s}]=t.useContext(v);return c.jsxs(c.Fragment,{children:[c.jsx("div",{className:h("End",e===d.game&&s===u.end?"visible":"invisible"),children:c.jsx("div",{children:c.jsx("div",{children:c.jsxs("div",{children:[c.jsxs("div",{className:"row",children:[c.jsx(Ge,{}),c.jsx($e,{})]}),c.jsxs("div",{className:"row justify-between",children:[c.jsxs("div",{className:"c1",children:[c.jsx(_e,{}),c.jsx(et,{}),c.jsx(tt,{})]}),c.jsx(nt,{})]}),c.jsx(ct,{})]})})})}),c.jsx(st,{})]})}),ot=t.memo(({dot:e})=>{const s=t.useRef(null),r=t.useRef(null),[{step:n}]=t.useContext(v);return t.useEffect(()=>{if(n===u.underBed||n===u.dirt){const o=()=>{if(s.current&&s.current.clientWidth>0&&s.current.clientHeight>0&&e.current){const a=s.current.getContext("2d");s.current.setAttribute("width",s.current.clientWidth.toString()),s.current.setAttribute("height",s.current.clientHeight.toString());const i=ue.smokeMachine(a,[255,255,255],.8);i.start(),r.current=setInterval(function(){const{left:m,top:A}=e.current.getBoundingClientRect(),j=(window.innerWidth-s.current.width)/2;i.addsmoke(m-j,A,2,2e3)},100)}else requestAnimationFrame(o)};return o(),()=>{r.current&&clearInterval(r.current)}}},[n]),c.jsx("div",{className:"smoke",children:c.jsx("canvas",{ref:s})})}),at=t.memo(({children:e})=>{const[{page:s}]=t.useContext(l),[r,n]=f({x:672}),[{step:o},a]=t.useContext(v);return t.useEffect(()=>{s===d.game&&o===u.dirt&&n({x:-D},{duration:2e3,easing:y.outSine,onEnd:()=>{n({x:0},{duration:k,easing:y.linear,onEnd:()=>{a(i=>({...i,clearTimes:i.clearTimes+1})),n({x:D},{duration:k,easing:y.linear,onEnd:()=>{n({x:0},{duration:k,easing:y.linear,onEnd:()=>{a(i=>({...i,clearTimes:i.clearTimes+1})),n({x:-D},{duration:k,easing:y.linear,onEnd:()=>{n({x:0},{duration:k,easing:y.linear,onEnd:()=>{a(i=>({...i,clearTimes:i.clearTimes+1})),n({x:D*2},{duration:k*2,easing:y.linear,onEnd:()=>{n({x:672},{duration:1e3,delay:We,easing:y.inOutSine,onStart:()=>{a(i=>({...i,step:u.dirt2Clear}))},onEnd:()=>{a(i=>({...i,step:u.clear}))}})}})}})}})}})}})}})}})},[o]),c.jsx("div",{className:"cleaner",style:r,children:c.jsx("div",{children:c.jsx("div",{children:e})})})}),it=t.memo(()=>{const e=t.useRef(null);return c.jsxs("div",{className:"vacuum",children:[c.jsx(ot,{dot:e}),c.jsx(at,{children:c.jsx("div",{className:"dot",ref:e})})]})}),ut=t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:1}),[{step:n,clearTimes:o},a]=t.useContext(v);return t.useEffect(()=>{e===d.game&&n===u.dirt&&r({opacity:0},{duration:500,onEnd:()=>{}})},[n]),c.jsxs("div",{className:h("dirt",n===u.underBed&&"pointer-events-auto"),children:[c.jsx("div",{onPointerDown:()=>{a(i=>({...i,step:u.dirt}))},className:h(o===0?"opacity-100":o===1?"opacity-70":o===2?"opacity-35":"opacity-0")}),c.jsx("div",{className:"out-line",style:s})]})}),dt=t.memo(()=>{const[{page:e}]=t.useContext(l),[s,r]=f({opacity:0}),[{step:n}]=t.useContext(v);return t.useEffect(()=>{e===d.game&&(n===u.underBed?r({opacity:1},{duration:500}):n===u.dirt2Clear&&r({opacity:0},{duration:1e3,easing:y.inOutCirc}))},[e,n]),c.jsxs("div",{className:h("UnderBed",e===d.game&&n<=u.dirt2Clear?"visible":"invisible",n===u.underBed&&"pointer-events-auto"),style:s,children:[c.jsx("div",{className:"background"}),c.jsx(ut,{}),c.jsx(it,{}),c.jsx("div",{className:"bed"})]})}),lt=t.memo(({children:e})=>{const[,s]=t.useContext(F),[{page:r},n]=t.useContext(l),[{step:o},a]=t.useContext(v),[i,m]=f({opacity:1});return t.useEffect(()=>{r===d.game&&o===u.fadeOut&&m({opacity:0},{onEnd:()=>{n(H),a(q),s({type:z.Page,state:de.result})}})},[o,r]),c.jsx("div",{className:h("Game",r===d.game?"visible":"invisible"),style:i,children:e})}),mt=t.memo(()=>{const e=t.useState(q),[{page:s}]=t.useContext(l),[{step:r}]=e;return c.jsx(v.Provider,{value:e,children:c.jsxs(lt,{children:[c.jsxs(Y,{children:[c.jsx(Ye,{}),r<=u.dialog&&c.jsx(Ze,{}),r<=u.dirt2Clear&&c.jsx(dt,{}),r<=u.clear&&c.jsx(qe,{}),c.jsx(rt,{})]}),s===d.game&&r<=u.unset&&c.jsx(Ie,{totalTime:3e4,status:r===u.unset?"start":"stop",onGameOver:()=>{console.log("a")},onFadeOut:()=>{console.log("b")}})]})})}),pt=t.memo(()=>{const[,e]=t.useContext(F),[s,r]=t.useState(H);return t.useEffect(()=>{e({type:z.LoadingProcess,state:{enabled:!0}})},[]),t.useEffect(()=>{s.step===S.loaded&&s.videoLoaded&&(e({type:z.LoadingProcess,state:{enabled:!1}}),r(n=>({...n,step:S.ready})))},[s.videoLoaded,s.step]),c.jsx(l.Provider,{value:[s,r],children:c.jsx(me,{onload:()=>{r(n=>({...n,step:S.loaded}))},children:c.jsx("div",{className:"Zhongli",children:c.jsxs(le,{children:[s.page<=d.landing&&c.jsx(Re,{}),s.page<=d.intro&&c.jsx(Ce,{}),s.page<=d.game&&c.jsx(mt,{})]})})})})});export{pt as default};
